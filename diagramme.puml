@startuml

title Projet Netflix - Diagramme de Classe

class Plateforme << (S,#FF7700) Singleton >>{
    {static} - listeUtilisateur: List<Utilisateur>
    {static} - listeRessource: List<Ressource>
    {static} + getInstance(): Plateforme
    + ajouterUtilisateur(utilisateur: Utilisateur): void
    + ajouterRessource(ressource: Ressource): void
    + getUtilisateur(email: string): Utilisateur
}

Plateforme "1" *-- "0..*" Utilisateur
Plateforme "1" *-- "0..*" Ressource

/'
---- Définition des Ressources ----
'/

enum TYPE_FILM_SERIE {
    COMEDIE
    DRAME
    ACTION
    HORREUR
    SCIENCE_FICTION
    ANIMATION
    AVENTURE
    THRILLER
    FANTASTIQUE
}

enum TYPE_DOCUMENTAIRE{
    HISTOIRE
    SCIENCE
    NATURE
    CUISINE
    ART
    POLITIQUE
    SPORT
    MUSIQUE
    CINEMA
}

class BandeAnnonce{
    - url: string
    - duree: integer
}

interface IRessource{
    + getNom(): string
    + getDescription(): string
    + getAgeMin(): integer
    + getSortie(): date
    + getBandeAnnonce(): BandeAnnonce
}

note "on pourrait faire une classe Acteur" as acteur
acteur .. Film

abstract Ressource {
    - nom: string
    - description: string
    - age_min: integer
    - sortie: date
    + play(): void
    + pause(): int // retourne le temps de lecture
}

Ressource "0..*" -- "1" BandeAnnonce
class Ressource implements IRessource

class Film{
    - duree: integer
    - acteurs: string
    - type: TYPE_FILM_SERIE
    + getDuree(): integer
    + getActeurs(): string
    + getType(): TYPE_FILM_SERIE
}

class Documentaire{
    - type: TYPE_DOCUMENTAIRE
    + getType(): TYPE_DOCUMENTAIRE
}

class Serie{
    - nbSaisons: integer
    - nbEpisodes: integer
    - type: TYPE_FILM_SERIE
    + getNbSaisons(): integer
    + getNbEpisodes(): integer
    + getType(): TYPE_FILM_SERIE
    + play(): void //redeffinition de la méthode play
}

class Episode{
    - numero: integer
    - saison: integer
    - duree: integer
    + getNumero(): integer
    + getSaison(): integer
    + getDuree(): integer
}

Serie "1" *-- "0..*" Episode
Serie "1" -- "1" Episode : "episode courant"

class Film extends Ressource
class Documentaire extends Ressource
class Serie extends Ressource

/'
---- Définition des Utilisateurs ----
'/

enum TYPE_ABONNEMENT{
    SOLO
    DUO
    FAMILLE
}

class Abonnement{
    - type: TYPE_ABONNEMENT
    - dateDebut: date
    - dateFin: date
    + getType(): TYPE_ABONNEMENT
    + getDateDebut(): date
    + getDateFin(): date
}

class Utilisateur{
    - email: string
    - dateNaissance: date
    - motDePasse: string
    - rib: string
    + getEmail(): string
    + getDateNaissance(): date
    + getMotDePasse(): string
    + getRib(): string
    + changerMotDePasse(motDePasse: string): void
    + resilierAbonnement(): boolean
    + ajouterFavoris(ressource: Ressource): void
    + supprimerFavoris(ressource: Ressource): void
    + ajouterLecture(ressource: Ressource): void
    + supprimerLecture(ressource: Ressource): void
}

Utilisateur "0..*" -- "0..*" Ressource : "liste de favoris"
Utilisateur "0..*" -- "0..*" Ressource : "liste de lecture" (map)
Utilisateur "0..*" -- "1" Abonnement

@enduml
